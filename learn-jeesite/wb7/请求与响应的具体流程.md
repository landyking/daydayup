#### web.xml首先看javaweb的入口：web.xml。web.xml中只配置了一个Filter，为Base，实际类为com.wb.common.Base。这里比较有意思。以往的框架，比如说spring，都是使用一个DispatchServlet来进行主控，而此处使用了Filter。具体进行了哪些只有Filter才能有的操作，我们接着往下看。#### Base Filter*   初始化 `init`。        1.  启动时间    1.  应用上下文    1.  应用根路径    1.  模块文件根路径    1.  加载系统数据（非数据库相关）                1.  系统变量 `Var.load();`        1.  后台控件列表 `Controls.load();`        1.  文件缓冲 `FileBuffer.load();`        1.  脚本缓冲 `ScriptBuffer.load();`        1.  字符串列表 `Str.load();`        1.  请求地址缓冲 `UrlBuffer.load();`        1.  Xwl缓冲 `XwlBuffer.load();`        1.  如果数据源可用（系统已经初始化完成），则加载系统数据（数据库相关）            1.  键值缓冲 `KVBuffer.load();`        1.  字典缓冲 `Dictionary.load();`        1.  启动定时任务管理器 `TaskManager.start();`    1.  检查授权，未授权则终止程序。    1.  运行自定义的初始化脚本（如果存在）。        > 如果初始化失败，则标记initFailed，并记录异常信息。在后续的请求进入Filter时，将异常抛出。*   销毁 `destroy`    1.  停止定时任务管理器    *   请求拦截 `doFilter`    1.  检查是否initFailed，如果是则抛出异常。    1.  尝试从请求中解析对应的xwl模块。            *   解析出xwl模块                    1.  设置请求属性                                1.  设置时间戳 `sys.date`                1.  设置id `sys.id`                1.  设置使用语言 `sys.useLang`                        1.  使用`Parser`处理xwl模块。                    *   未解析出xwl模块（地址已注册）                        1.  抛出找不到xwl的异常                    *   未解析出xwl模块（地址未注册）                        1.  检查是否是系统保护目录，如果是则返回不可访问。            1.  检查是否是wb内部文件请求且缓存已启用，如果符合则使用FileBuffer进行处理。            1.  其他的则交给FilterChain继续往下处理。            #### Parser 如何处理#### FileBuffer 如何处理